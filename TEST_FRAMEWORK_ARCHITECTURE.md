# æµ‹è¯•æ¡†æ¶æ··åˆæ¶æ„æ€»ç»“

## ğŸ“‹ æ¶æ„æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨**æ··åˆæµ‹è¯•æ¡†æ¶æ¶æ„**ï¼Œæ ¹æ®ä¸åŒåŒ…çš„éœ€æ±‚å’Œç‰¹ç‚¹ï¼Œä½¿ç”¨ä¸åŒçš„æµ‹è¯•æ¡†æ¶ï¼Œä»¥è·å¾—æœ€ä½³çš„å¼€å‘ä½“éªŒå’Œæµ‹è¯•è¦†ç›–ç‡ã€‚

---

## ğŸ—ï¸ æ¶æ„æ–¹æ¡ˆ

### æ–¹æ¡ˆï¼šæ··åˆæ¶æ„ï¼ˆæ¨è âœ…ï¼‰

- **packages/utils** - ä½¿ç”¨ **rstest + vitest**ï¼ˆåŒé‡æµ‹è¯•ï¼‰
- **packages/hooks** - ä½¿ç”¨ **vitest**ï¼ˆReact Hooks ä¸“ç”¨ï¼‰

---

## ğŸ“Š è¯¦ç»†æ¶æ„å›¾

```
packages/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ æµ‹è¯•æ¡†æ¶: vitest + rstest
â”‚   â”œâ”€â”€ é…ç½®:
â”‚   â”‚   â”œâ”€â”€ vitest.config.ts
â”‚   â”‚   â””â”€â”€ rstest.config.ts
â”‚   â”œâ”€â”€ æµ‹è¯•ç›®å½•: tests/
â”‚   â””â”€â”€ æµ‹è¯•æ–‡ä»¶: 8ä¸ª
â”‚
â””â”€â”€ hooks/
    â”œâ”€â”€ æµ‹è¯•æ¡†æ¶: vitest
    â”œâ”€â”€ é…ç½®:
    â”‚   â””â”€â”€ vitest.config.ts
    â”œâ”€â”€ æµ‹è¯•ç›®å½•: src/__tests__/
    â””â”€â”€ æµ‹è¯•æ–‡ä»¶: 9ä¸ªï¼ˆ170+ ç”¨ä¾‹ï¼‰
```

---

## ğŸ¯ å„åŒ…æµ‹è¯•æ¡†æ¶é€‰æ‹©

### packages/utils

**ä½¿ç”¨ rstest + vitest åŒé‡æµ‹è¯•**

#### ä¸ºä»€ä¹ˆä½¿ç”¨ rstestï¼Ÿ
- âœ… ç»Ÿä¸€çš„æµ‹è¯•é£æ ¼ï¼ˆä¸ Rust ç”Ÿæ€ä¿æŒä¸€è‡´ï¼‰
- âœ… æ›´å¿«çš„æµ‹è¯•æ‰§è¡Œé€Ÿåº¦
- âœ… ç®€æ´çš„æµ‹è¯• API
- âœ… é€‚åˆçº¯å‡½æ•°æµ‹è¯•

#### ä¸ºä»€ä¹ˆä¹Ÿä¿ç•™ vitestï¼Ÿ
- âœ… ä¸é¡¹ç›®å…¶ä»–éƒ¨åˆ†ä¿æŒä¸€è‡´
- âœ… æ›´å¥½çš„ TypeScript æ”¯æŒ
- âœ… æ›´ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€

#### æµ‹è¯•å‘½ä»¤
```bash
# ä½¿ç”¨ rstestï¼ˆå¿«é€Ÿï¼‰
pnpm -C packages/utils test:rust
pnpm -C packages/utils test:rust:watch

# ä½¿ç”¨ vitestï¼ˆæ ‡å‡†ï¼‰
pnpm -C packages/utils test
pnpm -C packages/utils test:watch
```

#### é…ç½®
- **rstest.config.ts** - ä¸“ä¸º Node.js ç¯å¢ƒä¼˜åŒ–
- **vitest.config.ts** - æ ‡å‡†é…ç½®ï¼Œä¸é¡¹ç›®ä¸€è‡´

---

### packages/hooks

**ä½¿ç”¨ vitest å•ä¸€æµ‹è¯•æ¡†æ¶**

#### ä¸ºä»€ä¹ˆä½¿ç”¨ vitestï¼Ÿ
- âœ… å®Œæ•´çš„ React Testing Library æ”¯æŒ
- âœ… jsdom ç¯å¢ƒæ¨¡æ‹Ÿ
- âœ… ä¸“é—¨çš„ Hooks æµ‹è¯•å·¥å…·ï¼ˆrenderHookï¼‰
- âœ… ä¼˜ç§€çš„ Mock æ”¯æŒï¼ˆvi.mockï¼‰
- âœ… å®Œæ•´çš„ React ç”Ÿæ€æ”¯æŒ

#### æµ‹è¯•å‘½ä»¤
```bash
# æ ‡å‡†æµ‹è¯•
pnpm -C packages/hooks test

# ç›‘è§†æ¨¡å¼
pnpm -C packages/hooks test:watch

# ç”Ÿæˆè¦†ç›–ç‡
pnpm -C packages/hooks coverage
```

#### é…ç½®
- **vitest.config.ts** - å®Œæ•´çš„ React æµ‹è¯•é…ç½®
  - environment: 'jsdom'
  - globals: true
  - è¦†ç›–ç‡é˜ˆå€¼: 80%

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | rstest | vitest |
|------|--------|--------|
| **React Hooks æµ‹è¯•** | âŒ ä¸æ”¯æŒ | âœ… å®Œæ•´æ”¯æŒ |
| **æ‰§è¡Œé€Ÿåº¦** | âœ… æ›´å¿« | âœ… å¾ˆå¿« |
| **Mock åŠŸèƒ½** | âš ï¸ æœ‰é™ | âœ… å¼ºå¤§ |
| **TypeScript æ”¯æŒ** | âœ… è‰¯å¥½ | âœ… ä¼˜ç§€ |
| **è¦†ç›–ç‡æŠ¥å‘Š** | âœ… istanbul | âœ… v8 |
| **React Testing Library** | âŒ ä¸æ”¯æŒ | âœ… å®Œæ•´æ”¯æŒ |
| **ç”Ÿæ€æ’ä»¶** | âš ï¸ è¾ƒå°‘ | âœ… ä¸°å¯Œ |

---

## ğŸ“ å¼€å‘æŒ‡å—

### é€‰æ‹©æµ‹è¯•æ¡†æ¶çš„åŸåˆ™

1. **çº¯å‡½æ•°/å·¥å…·å‡½æ•°** - å¯ä»¥ä½¿ç”¨ rstestï¼ˆpackages/utilsï¼‰
2. **React Hooks** - å¿…é¡»ä½¿ç”¨ vitestï¼ˆpackages/hooksï¼‰
3. **Node.js æœåŠ¡ç«¯ä»£ç ** - rstest æˆ– vitest éƒ½å¯ä»¥
4. **æµè§ˆå™¨æ¨¡æ‹Ÿä»£ç ** - å¿…é¡»ä½¿ç”¨ vitest

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰åŒ…çš„æµ‹è¯•
pnpm test

# åªè¿è¡Œ utils åŒ…
pnpm -C packages/utils test          # vitest
pnpm -C packages/utils test:rust     # rstest

# åªè¿è¡Œ hooks åŒ…
pnpm -C packages/hooks test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm -C packages/utils coverage
pnpm -C packages/hooks coverage
```

---

## âœ… æœ€ä½³å®è·µ

### åœ¨ packages/utils ä¸­
- ç®€å•æµ‹è¯•ä½¿ç”¨ `rstest`
- å¤æ‚æµ‹è¯•ä½¿ç”¨ `vitest`
- ä¿æŒä¸¤ç§æ¡†æ¶çš„æµ‹è¯•é£æ ¼ä¸€è‡´

### åœ¨ packages/hooks ä¸­
- å…¨éƒ¨ä½¿ç”¨ `vitest`
- ä½¿ç”¨ React Testing Library
- å……åˆ†åˆ©ç”¨ `renderHook` å’Œ `act()`

---

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡

### packages/utils
- **æ–‡ä»¶æ•°**: 8ä¸ªæµ‹è¯•æ–‡ä»¶
- **æ¡†æ¶**: rstest + vitest
- **æµ‹è¯•ç±»å‹**: çº¯å‡½æ•°å·¥å…·æµ‹è¯•

### packages/hooks
- **æ–‡ä»¶æ•°**: 9ä¸ªæµ‹è¯•æ–‡ä»¶
- **æµ‹è¯•ç”¨ä¾‹**: 170+ ä¸ª
- **æ¡†æ¶**: vitest
- **æµ‹è¯•ç±»å‹**: React Hooks æµ‹è¯•

---

## ğŸ”§ ç»´æŠ¤è¯´æ˜

### æ›´æ–°ä¾èµ–
```bash
# æ›´æ–° utils åŒ…
pnpm -C packages/utils update

# æ›´æ–° hooks åŒ…
pnpm -C packages/hooks update
```

### æ·»åŠ æ–°æµ‹è¯•
1. **utils åŒ…**: é€‰æ‹©åˆé€‚çš„æ¡†æ¶ï¼ˆrstest æˆ– vitestï¼‰
2. **hooks åŒ…**: å¿…é¡»åœ¨ vitest ä¸‹ç¼–å†™

### è¦†ç›–ç‡è¦æ±‚
- **æ‰€æœ‰åŒ…**: æ•´ä½“è¦†ç›–ç‡ â‰¥ 80%
- **å…³é”®æ¨¡å—**: è¦†ç›–ç‡ â‰¥ 90%

---

## ğŸ¯ æ€»ç»“

è¿™ç§**æ··åˆæ¶æ„**çš„ä¼˜åŠ¿ï¼š

1. âœ… **å› åœ°åˆ¶å®œ** - æ ¹æ®åŒ…çš„ç‰¹ç‚¹é€‰æ‹©æœ€é€‚åˆçš„æ¡†æ¶
2. âœ… **æ€§èƒ½ä¼˜åŒ–** - utils åŒ…å¯ä»¥ä½¿ç”¨æ›´å¿«çš„ rstest
3. âœ… **åŠŸèƒ½å®Œæ•´** - hooks åŒ…æ‹¥æœ‰å®Œæ•´çš„ React æµ‹è¯•èƒ½åŠ›
4. âœ… **ç»Ÿä¸€ç®¡ç†** - ä¸¤ç§æ¡†æ¶åœ¨åŒä¸€é¡¹ç›®ä¸­ï¼Œä¾¿äºç»´æŠ¤
5. âœ… **å‘åå…¼å®¹** - ä¿ç•™ vitest ä¿è¯ä¸ç°æœ‰æµ‹è¯•çš„å…¼å®¹æ€§

è¿™ç§æ¶æ„æ—¢ä¿è¯äº†æ€§èƒ½ï¼Œåˆç¡®ä¿äº†åŠŸèƒ½çš„å®Œæ•´æ€§ï¼Œæ˜¯æœ€ä½³å®è·µçš„ä½“ç°ã€‚

---

**åˆ›å»ºæ—¥æœŸ**: 2025-11-04
**æ¶æ„ç‰ˆæœ¬**: v1.0.0
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
